#include cstd.hhh
#macro RET_ZERO return 0
#macro EXIT_WITH_PROMPT
    printf("exit\n");
    #RET_ZERO
#end

succ: (x: usize) -> usize = {
    #asm
    mov     rax, rdi
    inc     rax
    #end
    return _;
}

inc: (x: *usize) = {
    #asm
    mov     rax, rdi
    mov     rax, qword [rax]
    lea     rdx, [rax+1]
    mov     rax, rdi
    mov     qword [rax], rdx
    #end
    return;
}

add: (x: usize, y: usize) -> usize = {
    #asm
    mov     rax, rdi
    add     rax, rsi
    #end
    return _;
}

main: () -> u32 = {
    a: = 10;
    ptr: = &a;
    inc(ptr);
    printf("%lu\n", a);
    printf("%lu\n", *ptr);
    #EXIT_WITH_PROMPT;
}